(this.webpackJsonppetfinder=this.webpackJsonppetfinder||[]).push([[0],{115:function(e,t,n){},116:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},151:function(e,t,n){},153:function(e,t,n){},154:function(e,t,n){},158:function(e,t,n){"use strict";n.r(t);var a=n(54),c=n(55),i=n(62),r=n(61),s=n(2),o=n.n(s),l=n(31),d=n(8),u=n(44),j=(n(113),n(160),u.a.initializeApp({apiKey:"AIzaSyDyWSlLfn4xaHa2vDVP-ndkHgdC-VUli3g",authDomain:"petfinder-b4ec4.firebaseapp.com",projectId:"petfinder-b4ec4",storageBucket:"petfinder-b4ec4.appspot.com",messagingSenderId:"347902170293",appId:"1:347902170293:web:82ad3b56ba3a0df6bedafc"})),b=u.a.storage(),g=u.a.auth(),p=new u.a.auth.GoogleAuthProvider;u.a.auth().useDeviceLanguage();n(115);var f=n.p+"static/media/appIcon.179f6022.svg",m=n.p+"static/media/googleIcon.66ae25be.svg",O=n.p+"static/media/userIcon.bd6274c0.svg",h=n.p+"static/media/passwordIcon.8ee8285a.svg",v=n.p+"static/media/goBackIcon.2f421e2d.svg",x=(n(116),n(0));function k(e){var t=e.color;return Object(x.jsxs)("div",{className:"lds-ring",children:[Object(x.jsx)("div",{style:{borderColor:t}}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{}),Object(x.jsx)("div",{})]})}var w=function(e){var t=e.color;return Object(x.jsx)("div",{className:"loadinBackground fullScreen",children:Object(x.jsx)(k,{color:t})})},y=function(e){var t=e.email,n=e.password,a=e.handleLogin,c=e.handleSingUp,i=e.hasAccount,r=e.setHasAccount,o=e.errors,l=e.handleLoginWithGoogle,u=e.show,j=e.hide,b=e.loading,g=e.newPassword,p=e.resetPassword,w=e.clearErrors,y=Object(s.useState)(!1),N=Object(d.a)(y,2),A=N[0],C=N[1],S=Object(s.useState)(!1),E=Object(d.a)(S,2),I=E[0],D=E[1];return u?Object(x.jsxs)("section",{className:"loginContainer justify-center align-center",children:[Object(x.jsx)("img",{alt:"salir",src:v,onClick:j,className:"goback"}),Object(x.jsxs)("div",{id:"login",className:"relative justify-center align-center",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{className:"appIcon",src:f,alt:"icono de la app"}),Object(x.jsx)("p",{className:"slogan",children:"Encuentra, reporta y ayuda"})]}),Object(x.jsxs)("div",{className:"inputsContainer align-center",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:O}),Object(x.jsx)("input",{type:"text",autoFocus:!0,autoComplete:"off",placeholder:"Email",required:!0,onChange:function(e){t.current=e.target.value}})]}),Object(x.jsx)("div",{className:"errorMsg small",children:o.emailError}),Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:h}),Object(x.jsx)("input",{type:"password",required:!0,autoComplete:"off",placeholder:"contrase\xf1a",onChange:function(e){n.current=e.target.value}})]}),Object(x.jsx)("p",{className:"errorMsg small",children:o.passwordError}),i?Object(x.jsxs)("div",{className:"relative",children:[Object(x.jsx)("div",{onClick:a,className:"BtnContainer",children:b?Object(x.jsx)(k,{color:"white"}):Object(x.jsx)("button",{className:"signInBtn",children:"Ingresar"})}),Object(x.jsxs)("p",{children:["Sin cuenta? ",Object(x.jsx)("span",{onClick:function(){r(!1),w()},children:"Registrate"})]}),g&&!I&&Object(x.jsx)("div",{className:"small",children:Object(x.jsx)("span",{onClick:function(){A||(p(),C(!0),D(!0))},children:"Restablecer Contrase\xf1a"})}),I&&Object(x.jsx)("div",{className:"white small bolder",children:"Revisa tu correo para restablecer la contrase\xf1a"})]}):Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:Object(x.jsx)("div",{className:"BtnContainer signUpBtn",children:b?Object(x.jsx)(k,{color:"white"}):Object(x.jsx)("button",{onClick:c,className:"signUpBtn",children:"Registrarse"})})}),Object(x.jsxs)("p",{children:["Tienes cuenta? ",Object(x.jsx)("span",{onClick:function(){r(!0),w()},children:"Ingresar"})]})]})]}),Object(x.jsx)("div",{className:"googleBtnDiv justify-center relative",onClick:l,children:Object(x.jsxs)("button",{className:"justify-center align-center",children:[Object(x.jsx)("img",{src:m}),"Continuar con Google"]})})]})]}):null},N=n(56),A=n(166),C=n(170),S=n(167),E=n(3),I=n.n(E),D=n(89),F=n(165);var M=function(){var e=Object(F.a)();return Object(s.useEffect)((function(){var t=(new D.Geosearch).addTo(e),n=(new I.a.LayerGroup).addTo(e);t.on("results",(function(e){n.clearLayers();for(var t=e.results.length-1;t>=0;t--)n.addLayer(I.a.marker(e.results[t].latlng))}))}),[e]),null},L=(n(77),n(12)),B=n(18),R=n(6),P=n(19),T=n.n(P),z=n.p+"static/media/closeIcon.02c12aa2.svg",W=n.p+"static/media/dogIcon.b0eb46e3.svg",U=n.p+"static/media/catIcon.4974aa74.svg";n(136);function H(e){for(var t=Object(s.useState)(0<e.defaultValue),n=Object(d.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(1<e.defaultValue),r=Object(d.a)(i,2),o=r[0],l=r[1],u=Object(s.useState)(2<e.defaultValue),j=Object(d.a)(u,2),b=j[0],g=j[1],p=Object(s.useState)(3<e.defaultValue),f=Object(d.a)(p,2),m=f[0],O=f[1],h=Object(s.useState)(5<e.defaultValue),v=Object(d.a)(h,2),k=v[0],w=[c,l,g,O,v[1]],y=[],N=[a,o,b,m,k],A=function(t){y.push(Object(x.jsx)("div",{style:{background:N[t]?"#3B72E1":"#E3E3E3"},onClick:function(){!function(e,t,n){t.frecuence=e+1,n.forEach((function(t,n){t(!(e<n))}))}(t,e.frecuence,w),e.setFrecuence(t+1)}},t))},C=0;C<5;C++)A(C);return Object(x.jsx)("div",{className:"form",style:{display:e.display},children:Object(x.jsx)("div",{className:"frecuences",children:y})})}n(137);var V,Y,J,G=function(e){var t=e.file,n=e.closeWindow,a=e.show,c=e.setMiniature,i=e.saveFile,r={display:a?"flex":"none"},o=Object(s.useState)(),l=Object(d.a)(o,2),u=l[0],j=l[1],b=t?URL.createObjectURL(u||t):void 0;return Object(x.jsx)("div",{style:r,className:"uploadPhototsContainer",children:Object(x.jsxs)("form",{className:"uploadPhotos",onSubmit:function(e){q(e,u||t,i),n(),c(b)},children:[Object(x.jsx)("h2",{children:"Sube una imagen del animal"}),Object(x.jsxs)("label",{alt:"animals photo",children:[Object(x.jsx)("img",{src:b,alt:t?t.name:void 0,title:t?t.name:void 0}),Object(x.jsx)("input",{type:"file",name:"img",accept:"image/*",onChange:function(e){i(e.target.files[0]),j(e.target.files[0])}})]}),Object(x.jsx)("img",{src:z,onClick:function(){n(),j(void 0)},className:"close"}),Object(x.jsx)("input",{type:"submit",className:"circular",value:""})]})})},q=function(e,t,n){e.preventDefault(),n(t)},Z=n(105),Q=(n(144),150),K=150,_=o.a.memo((function(e){Object(s.useEffect)((function(){V=r.x,Y=r.y;var e=n.getZoom();J=function(){var t=n.containerPointToLatLng({x:V,y:Y}),a=Math.pow(2,e-n.getZoom());c((function(c){return e=n.getZoom(),{coords:t,range:c.range*a}}))},n.on("moveend",(function(){J()}))}),[]);var t,n=Object(F.a)(),a=e.habitadVisible,c=e.setMarkerCoords,i=e.markerData,r=n.latLngToContainerPoint(n.getCenter()),o=0;a||(V=r.x,Y=r.y);var l;try{l=e.markerData.coords?n.latLngToContainerPoint(i.coords):{x:r.x,y:r.y}}catch(u){console.log(null===u||void 0===u?void 0:u.code),l={x:r.x,y:r.y},c((function(e){return{coords:n.getCenter(),range:e.range}}))}var d=i?function(e,t){if(!e)return;var n=t.getSize().x,a=t.distance({lng:t.getBounds()._southWest.lng,lat:t.getBounds()._southWest.lat},{lng:t.getBounds()._northEast.lng,lat:t.getBounds()._southWest.lat});return 2*e*n/a}(i.range,n):0;return Q=i.range?d:Q,K=i.range?d:K,Object(x.jsx)("div",{style:{display:a?"block":"none"},className:"markerContainer",children:a&&Object(x.jsx)(Z.a,{lockAspectRatio:"1",bounds:"parent",style:{display:"flex",alignItems:"center",justifyContent:"center",border:"solid 3px #37B258",backgroundColor:"#37B25845",borderRadius:"50%",zIndex:5},default:{x:l.x-Q/2,y:l.y-K/2,width:Q,height:K},minWidth:"60px",minHeight:"60px",onDragStart:function(){n.dragging.disable()},onDragStop:function(e,t){n.dragging.enable();var a=t.node.clientHeight,i=t.node.clientWidth;V=t.x+i/2,Y=t.y+a/2;var r=n.containerPointToLatLng({x:V,y:Y});c((function(e){return{coords:r,range:e.range}}))},onResizeStart:function(){n.dragging.disable()},onResizeStop:function(e,a,i){n.dragging.enable(),o=i.clientHeight,t=i.clientWidth;var r=i.style.transform.match(/[+-]?\d+(\.\d+)?/g).map((function(e){return parseFloat(e)}));r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,V=r[0]+t/2,Y=r[1]+o/2;var s=n.containerPointToLatLng({x:V,y:Y}),l=n.containerPointToLatLng({x:V+t/2,y:Y}),d=n.distance(s,l);c((function(e){return{coords:s,range:d}}))},children:Object(x.jsxs)("div",{className:"borderballcontainer",children:[Object(x.jsx)("div",{id:"top",className:"borderball"}),Object(x.jsx)("div",{id:"bottom",className:"borderball"}),Object(x.jsx)("div",{id:"left",className:"borderball"}),Object(x.jsx)("div",{id:"right",className:"borderball"}),Object(x.jsx)("img",{className:"marker",draggable:!1,src:"dog"==e.markerData.type?W:U})]})})})}));n(145);var X,$=n.p+"static/media/plus .bfd0a1b5.svg",ee=n.p+"static/media/cameraIcon.5b343d0a.svg",te=n.p+"static/media/petsIcon.0130960a.svg",ne=n.p+"static/media/points.9f3b05b2.svg",ae=n.p+"static/media/trashIcon.6a17436e.svg",ce=n.p+"static/media/sendIcon.c6138de2.svg",ie=n(17),re=n(25),se=Object(re.b)({name:"notifications",initialState:{value:{progress:0,showProgress:!1,showOutOfRange:!1,showMarkerInThere:!1,withoutConnection:!1,feedBack:!1,noEditable:!1,editInstructions:!1}},reducers:{showNotifications:function(e,t){e.value=Object(R.a)(Object(R.a)({},e.value),t.payload)},hideNotifications:function(e){e.value={}}}}),oe=se.actions,le=oe.showNotifications,de=oe.hideNotifications,ue=se.reducer,je=Object(re.b)({name:"editing",initialState:{value:!1},reducers:{activate:function(e){e.value=!0},deactivate:function(e){e.value=!1}}}),be=je.actions,ge=be.activate,pe=be.deactivate,fe=je.reducer,me=Object(re.b)({name:"backup",initialState:{value:!1},reducers:{triggerBackup:function(e,t){e.value=Object(R.a)({},t.payload)},addBackup:function(e,t){e.value={pointDeleted:t.payload}}}}),Oe=me.actions,he=Oe.triggerBackup,ve=Oe.addBackup,xe=me.reducer,ke=Object(re.b)({name:"panel",initialState:{value:{opened:!1,markerData:{}}},reducers:{open:function(e,t){return{value:{opened:!0,markerData:t.payload.markerData}}},close:function(){return{value:{opened:!1,markerData:{}}}}}}),we=ke.actions,ye=we.open,Ne=we.close,Ae=ke.reducer,Ce=Object(re.a)({reducer:{editing:fe,notifications:ue,backup:xe,panel:Ae}}),Se="https://us-central1-petfinder-b4ec4.cloudfunctions.net/app/",Ee=!1,Ie=void 0,De=void 0,Fe={},Me={frecuence:4},Le=function(e){var t=Object(F.a)(),n=e.defaultMarkerData,a=e.editing,c=e.setEditing,i=e.panes;n=n||{},(Fe=Fe._id===n._id?Fe:Object(R.a)({},n)).coords=Fe.coords||t.getCenter(),Fe.range=Fe.range?Fe.range:178,Fe.frecuence=Fe.frecuence?Fe.frecuence:3;var r=Object(s.useState)({active:a,miniature:void 0}),o=Object(d.a)(r,2),l=o[0],u=o[1],j=Object(s.useState)(void 0),b=Object(d.a)(j,2),g=b[0],p=b[1],f=Object(ie.b)();Object(s.useEffect)((function(){X=function(e,t,n,a,c){f(le({progress:e,showProgress:t,showOutOfRange:n,noEditable:a,withoutConnection:c}))},window.onkeydown=function(n){"Escape"===n.key&&(console.log("escape"),ze(u,Fe,Ee,t,c,i,e.open),Ce.getState().editing.value&&f(pe()))},Ce.subscribe((function(){Ce.getState().editing.value||a||(console.log("cancelling"),ze(u,Fe,l.active,t,c,i,e.open,!Ce.getState().notifications.withoutConnection))}))}),[]);var m=["dog","cat"].map((function(e){return Object(x.jsx)("div",{className:[e+"Option circular"],children:Object(x.jsx)("img",{src:"dog"==e?W:U,draggable:!1,onClick:function(){Ee&&t.removeLayer(Ee),Fe.type=e,Fe.coords=t.getCenter(),Ee=!0,u({active:!0,miniature:void 0})}})},e)}));return Object(x.jsxs)("div",{className:"Animal",children:[Object(x.jsx)(_,{habitadVisible:l.active||a,markerData:Fe,setMarkerCoords:function(e){if("function"===typeof e){var t=e({coords:Fe.coords,range:Fe.range});Fe.coords=t.coords,Fe.range=t.range}else Fe.coords=e.coords,Fe.range=e.range}}),!a&&!l.active&&Object(x.jsx)("div",{className:"menu",children:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("div",{className:"animalOptions",children:m}),Object(x.jsx)("img",{alt:"Report an animal living in the street",className:"selector",src:$})]})}),(l.active||a)&&Object(x.jsxs)("div",{className:"optionsContainer",children:[Object(x.jsx)(G,{show:g&&l.active,file:g,closeWindow:function(){p(void 0)},setMiniature:function(e){console.log("setting miniture"),u((function(t){return{active:t.active,miniature:e}}))},saveFile:function(e){Fe.file=e}}),Object(x.jsxs)("form",{className:"options",onSubmit:function(n){n.preventDefault(),(l.active||a)&&function(e,t,n,a,c,i,r,s,o,l,d,u){Be.apply(this,arguments)}(u,e.panelDisplay,t,X,n,e.userid,e.editing,c,Fe,i,l,e.open)},onMouseEnter:function(){t.dragging.disable()},onMouseLeave:function(){t.dragging.enable()},onTouchStart:function(){t.dragging.disable()},onTouchEnd:function(){t.dragging.enable()},children:[Object(x.jsxs)("div",{id:"moreOptionsContainer",className:"hide-scroll",children:[Object(x.jsxs)("div",{className:"moreOptions",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("label",{for:"description",children:"Descripci\xf3n"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{src:te,alt:"descripci\xf3n",className:"petsIcon icon"}),Object(x.jsx)("textarea",{id:"description",type:"text",defaultValue:Fe.description})]})]}),Object(x.jsxs)("div",{className:"contactContainer",children:[Object(x.jsx)("label",{for:"contact",children:"Contacto"}),Object(x.jsxs)("div",{children:[Object(x.jsx)("img",{className:"userIcon icon",src:O}),Object(x.jsx)("input",{id:"contact",type:"text",defaultValue:Fe.contact})]})]}),Object(x.jsxs)("div",{children:[Object(x.jsx)("div",{children:"\xbfCuantas veces le has visto?"}),Object(x.jsx)(H,{display:"block",frecuence:Me,defaultValue:Fe.frecuence,setFrecuence:function(e){Fe.frecuence=e}})]}),Object(x.jsxs)("label",{className:"cameraIconContainer",children:[Object(x.jsxs)("label",{className:"cameraIcon",alt:"add a picture",children:[Object(x.jsx)("img",{src:l.miniature?l.miniature:ee,alt:"a\xf1ade una imagen del animal"}),Object(x.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];Fe.file=t,p(t),u((function(e){return{active:!0,miniature:e.miniature}}))},accept:"image/*"})]}),Object(x.jsx)("span",{children:"A\xf1ade una foto"})]})]}),Object(x.jsx)("span",{children:Object(x.jsx)("img",{src:ne})})]}),Object(x.jsxs)("div",{className:"mainOptions",children:[Object(x.jsxs)("label",{className:"circular sendIcon",children:[Object(x.jsx)("input",{type:"submit",value:""}),Object(x.jsx)("img",{src:ce,alt:"enviar"})]}),Object(x.jsx)("img",{src:z,alt:"cancelar",className:"cancelMarker circular",onClick:function(){ze(u,Fe,l.active,t,c,i,e.open)}}),a&&Object(x.jsx)("img",{src:ae,alt:"Eliminar",className:"circular",onClick:Object(B.a)(Object(L.a)().mark((function a(){var c,r,s;return Object(L.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e.setEditing(!1),ze(u,Fe,!0,t,!1,i,e.open),a.next=5,T.a.delete(Se,{data:{_id:Fe._id,userid:e.userid}});case 5:c=a.sent,r=c.data,(s=n)._id=r._id,s.lat=n.coords.lat,s.lng=n.coords.lng,s.coords=void 0,s.defaultMarkerData=void 0,f(ve(Object.assign({},s))),a.next=22;break;case 16:a.prev=16,a.t0=a.catch(0),X(!1,!1,!1,!1,!0),setTimeout((function(){X()}),2e3),console.log("256"),console.log(a.t0);case 22:case"end":return a.stop()}}),a,null,[[0,16]])})))})]})]})]})]})};function Be(){return(Be=Object(B.a)(Object(L.a)().mark((function e(t,n,a,c,i,r,s,o,l,d,u,j){var g,p,f,m,O,h,v;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o&&o({active:!1}),a.dragging.enable(),g=i.target[0].value,p=i.target[1].value,l.description=g,l.contact=p||l.contact,l.userid=r,l.range>400)setTimeout((function(){c(0,!1,!1)}),3e3),c(0,!1,!0);else{Ee=!1,t({active:!1,miniature:void 0});try{l.file?(m=l.coords,O=m.lat,h=m.lng,v="LatLng(".concat(O,", ").concat(h,")").concat(l.file.name),b.ref("images/".concat(v)).put(l.file).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes);c(t,!0),1==t&&setTimeout((function(){c(0,!1)}),400)}),(function(e){"storage/unauthorized"!==e.code&&(c(),Ie.removeFrom(a),De.removeFrom(a))}),Object(B.a)(Object(L.a)().mark((function e(){var t,c,i,u,j;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.ref("images").child(v).getDownloadURL();case 2:j=e.sent,null===(t=Ie)||void 0===t||null===(c=t.removeFrom)||void 0===c||c.call(t,a),null===(i=De)||void 0===i||null===(u=i.removeFrom)||void 0===u||u.call(i,a),Re(l=Object(R.a)(Object(R.a)({},l),{},{imgurl:j,localimgurl:void 0}),n,r,s,o,a,d);case 7:case"end":return e.stop()}}),e)})))),f=URL.createObjectURL(l.file),Re(l=Object(R.a)(Object(R.a)({},l),{},{localimgurl:f}),n,r,s,o,a,d)):Re(l,n,r,s,o,a,d),ct(Me.frecuence,l.coords.lat+""+l.coords.lng,!0),l.file=void 0}catch(x){c(!1,!1,!1,!1,!0),ze(t,l,u,a,o,d,j,!0)}}case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t,n,a,c,i,r){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(B.a)(Object(L.a)().mark((function e(t,n,a,c,i,r,s){var o,l;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Te(t,r,i,s),t.localimgurl){e.next=30;break}if(o=Object(R.a)(Object(R.a)({newlat:t.coords.lat,newlng:t.coords.lng},t),{},{userid:a}),e.prev=3,c){e.next=15;break}return console.log("postin"),e.next=8,T.a.post(Se,o);case 8:l=e.sent,t._id=l.data._id,Ie.removeFrom(r),De.removeFrom(r),Te(t,r,i,s),e.next=21;break;case 15:return console.log("updating"),t.defaultMarkerData=void 0,t.defaultMarkerData=Object.assign({},t),e.next=20,T.a.put(Se,Object(R.a)(Object(R.a)({},o),{},{relocating:!0}));case 20:l=e.sent;case 21:console.log(200===l.status?"Dato registrado":"Error en el envio del punto"),e.next=30;break;case 24:e.prev=24,e.t0=e.catch(3),console.log(e.t0),X(!1,!1,!1,!1,!0);try{Ie.removeFrom(r),De.removeFrom(r)}catch(n){console.log(n)}setTimeout(X,2500);case 30:case"end":return e.stop()}}),e,null,[[3,24]])})))).apply(this,arguments)}function Te(e,t,n,a){n&&n({active:!1});var c=I.a.icon({iconUrl:"dog"===e.type?W:U,iconSize:"dog"===e.type?[38,38]:[35,35]}),i=I.a.marker(e.coords,{icon:c,zIndexOffset:3});i.addTo(t);var r=I.a.circle(e.coords,{radius:e.range,color:Ce.getState().editing.value?"#3BF793":"#3388FF"});r.addTo(t),a.push({pane:r,editable:!0}),Ie=i,De=r,e.defaultMarkerData=e.defaultMarkerData?e.defaultMarkerData:Object(R.a)({},e),e.defaultMarkerData.coords=e.coords,e.defaultMarkerData.range=e.range,i.on("click",(function(){Ce.getState().editing.value?(r.removeFrom(t),i.removeFrom(t),n({active:!0,markerData:e})):Ce.dispatch(ye(e))})),t.dragging.enable()}function ze(e,t,n,a,c,i,r){var s=arguments.length>7&&void 0!==arguments[7]&&arguments[7];if(n&&(e({active:!1,miniature:void 0}),Ee=!1),a.dragging.enable(),c&&t.defaultMarkerData&&!s){var o=Object(R.a)({},t);o.defaultMarkerData=void 0,(t=t.defaultMarkerData).defaultMarkerData=o,Te(t,a,c,i)}}var We,Ue,He,Ve,Ye,Je,Ge,qe=n.p+"static/media/refugeIcon.7f80cf5d.svg",Ze=[{coordinates:"0"}],Qe=[],Ke=["0"],_e=[],Xe=void 0,$e=!1,et=!1,tt=function(e){var t=Object(F.a)(),n=Object(s.useState)({active:!1,type:"dog",coords:{lat:!1,lng:!1}}),a=Object(d.a)(n,2),c=a[0],i=a[1],r=Object(ie.b)(),o=function(e,t){r(le({noEditable:e,withoutConnection:t}))};if(Xe!=e.userid){Xe=e.userid,Ze=[{coordinates:"0"}],nt(t,e,i,o);for(var l=0;l<Qe.length;l++)Qe[l].removeFrom(t),_e[l].pane.removeFrom(t)}Object(s.useEffect)((function(){t.locate({setView:!0,maxZoom:16}),t.on("locationfound",(function(n){nt(t,e,i,o)})),t.on("dragend",(function(){nt(t,e,i,o)})),t.on("zoomend",(function(){t.getZoom()<u&&(nt(t,e,i,o),u=t.getZoom())})),Ce.subscribe(Object(B.a)(Object(L.a)().mark((function n(){var a,c,r,s,l,d,u;return Object(L.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!Ce.getState().backup.value._id||$e===Ce.getState().backup.value._id){n.next=19;break}return n.prev=1,console.log("restoring"),a=Object.assign({},Ce.getState().backup.value),T.a.put(Se+"backup",{_id:Ce.getState().backup.value._id}),n.next=7,T.a.post(Se,Ce.getState().backup.value);case 7:c=n.sent,r=c.data,$e=Ce.getState().backup.value._id,a._id=r._id,s=new I.a.icon({iconUrl:W,iconSize:[38,38]}),l=new I.a.icon({iconUrl:U,iconSize:[35,35]}),it(a,s,l,t,e.userid,e.open,Ce.getState().editing.value,o,i,!0),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),console.log(n.t0);case 19:if(Ce.getState().editing.value!=et)for(console.log("change editing"),et=Ce.getState().editing.value,d=0;d<_e.length;d++)_e[d].editable&&_e[d].pane.setStyle({color:Ce.getState().editing.value?"#3BF793":"#3388FF"});Ce.getState().panel.value.opened||null===(u=We)||void 0===u||u.setStyle({color:"#3388FF"});case 21:case"end":return n.stop()}}),n,null,[[1,16]])}))))}),[]);var u=t.getZoom();return Object(x.jsx)(Le,{editing:c.active,setEditing:i,userid:e.userid,panelDisplay:e.open,open:e.open,panes:_e,defaultMarkerData:c.markerData})},nt=function(e,t,n,a){var c=e.getBounds(),i=c._northEast,r=c._southWest,s=1.1*r.lat-Math.abs(.1*i.lat),o=1.1*i.lat-.1*r.lat,l=Math.abs(i.lng-r.lng)<Math.abs(r.lng+i.lng)?Math.abs(i.lng-r.lng):Math.abs(r.lng+i.lng),d=r.lng-.1*l,u=i.lng+.1*l,j=Object.keys(Ze);at(e.getCenter(),e.distance(i,r)/2,e),T.a.get(Se,{params:{lowerlat:s,upperlat:o,lowerlng:d,upperlng:u,markersLoaded:j,userid:t.userid}}).then((function(c){if(200===c.status){var i=new I.a.icon({iconUrl:W,iconSize:[38,38]}),r=new I.a.icon({iconUrl:U,iconSize:[35,35]}),s=Ce.getState().editing.value;c.data.forEach((function(c){Object.keys(Ze).includes(c.lat+""+c.lng)||it(c,i,r,e,t.userid,t.open,s,a,n)}))}else console.log("Db error")})).catch((function(e){a(!1,!0),setTimeout((function(){a()}),3e3),console.log("Network error")}))},at=function(){var e=Object(B.a)(Object(L.a)().mark((function e(t,n,a){var c,i,r,s;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=t.lat,i=t.lng,r=new I.a.icon({iconUrl:qe,iconSize:[38,38]}),e.prev=2,e.next=5,T.a.get(Se+"refuges",{params:{lat:c,lng:i,radius:n,refugesLoaded:Ke}});case 5:s=e.sent,s.data.forEach((function(e){Ke.push(e.lat+""+e.lng);var t=I.a.marker({lat:e.lat,lng:e.lng},{icon:r,iconSize:[38,38]});t.bindPopup("<b>".concat(e.name,'</b><br/><br />\n        <div class="lds-ring">\n          <div style={{ borderColor: color }}></div><div></div><div></div><div></div>\n        </div>')).on("popupopen",(function(t){T.a.get(Se+"refugeDatails",{params:{_id:e._id}}).then((function(n){t.popup.setContent('<b class="red">'.concat(e.name,"</b><br/>\n                ").concat(n.data.formatted_address?"<b>Direccion:</b><br />".concat(n.data.formatted_address,"<br />"):"","\n                ").concat(n.data.formatted_phone_number?"<b>Telefono:</b><br />".concat(n.data.formatted_phone_number,"<br />"):"","\n                ").concat(n.data.website?"<b>Sitio web:</b><br />".concat(n.data.website):""))}))})),t.addTo(a)})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,n,a){return e.apply(this,arguments)}}(),ct=function(e,t){e=e>=5?5:e,arguments.length>2&&void 0!==arguments[2]&&arguments[2]?(e=e>10?10:e,Ze[t]={frecuence:e}):Ze[t].frecuence=e},it=function(e,t,n,a,c,i,r,s,o){var l=arguments.length>9&&void 0!==arguments[9]&&arguments[9];if(l&&a.setView({lat:e.lat,lng:e.lng}),!Object.keys(Ze).includes(e.lat+""+e.lng)||l){var d,u=I.a.marker({lat:e.lat,lng:e.lng},{icon:"dog"===e.type?t:n,zIndexOffset:2});u.addTo(a),Ze[e.lat+""+e.lng]={frecuence:e.frecuence};var j=e.userid===c&&r?"#3BF793":"#3388FF";e.range?(d=I.a.circle({lat:e.lat,lng:e.lng},{radius:e.range,color:j})).addTo(a):(d=I.a.circle({lat:e.lat,lng:e.lng},{radius:100,color:j})).addTo(a),_e.push({pane:d,editable:e.userid==c}),Qe.push(u),u.on("click",(function(){var t;if(Ce.getState().editing.value)if(e.userid!=c)s(!0),setTimeout((function(){s(!1)}),2500);else{d.removeFrom(a),u.removeFrom(a);var n={type:e.type,coords:{lat:e.lat,lng:e.lng},frecuence:e.frecuence,imgurl:e.imgurl,description:e.description,contact:e.contact,range:e.range?e.range:100,_id:e._id,userid:e.userid};o({active:!0,markerData:Object(R.a)(Object(R.a)({},n),{},{defaultMarkerData:n})})}else null===(t=We)||void 0===t||t.setStyle({color:"#3388FF"}),d.setStyle({color:"#2914CC",fillColor:"#3388FF"}),We=d,Ce.dispatch(ye({markerData:{coords:{lat:e.lat,lng:e.lng},frecuence:Ze[e.lat+""+e.lng].frecuence,imgurl:e.imgurl?e.imgurl:"dog"==e.type?W:U,description:e.description,contact:e.contact}}))}))}},rt=n.p+"static/media/frecuenceIcon.4f6f76d8.svg",st=n.p+"static/media/minus.aa194caa.svg",ot=(n(148),function(){var e=Object(ie.c)((function(e){return e.panel.value})),t=e.opened,n=e.markerData,a=n.imgurl,c=n.coords,i=n.contact,r=n.description,o=n.imgKey,l=n.frecuence,u=c||{lat:void 0,lng:void 0},j=u.lat,b=u.lng;Ue=j+""+b;var g=Object(ie.b)(),p=Object(s.useState)({loading:!1,isImgOpen:!1,imgLoading:!0,prob:2*l}),f=Object(d.a)(p,2),m=f[0],h=f[1];Object(s.useEffect)((function(){h((function(e){return Object(R.a)(Object(R.a)({},e),{},{imgLoading:!0})}))}),[a]),Object(s.useEffect)((function(){h((function(e){return Object(R.a)(Object(R.a)({},e),{},{prob:2*l})}))}),[l]);var v=Object(s.useCallback)((function(){m.isImgOpen||h((function(e){return Object(R.a)(Object(R.a)({},e),{},{isImgOpen:!0})}))}),m.isImgOpen),w=Object(s.useMemo)((function(){for(var e=[],t=0;t<10;t++)e.push(Object(x.jsx)("div",{style:{background:t<m.prob?"#3B72E1":"#E3E3E3"}},t));return e}),[m.prob]),y=Object(s.useMemo)((function(){return{previousOptio1key:Math.random(),previousOptio2key:Math.random()}})),N=y.previousOptio1key,A=y.previousOptio2key,C=Object(s.useCallback)((function(){var e;null===m||void 0===m||null===(e=m.unpaintCircle)||void 0===e||e.call(m),g(Ne())}),[]),S=Object(s.useCallback)((function(e){e.target.checked&&lt(j,b,!0,h,l)}),[j,b,l]),E=Object(s.useCallback)((function(e){e.target.checked&&lt(j,b,!1,h,l)}),[j,b,l]),I=Object(s.useCallback)((function(){h((function(e){return Object(R.a)(Object(R.a)({},e),{},{isImgOpen:!1})}))}),[]),D=Object(s.useCallback)((function(){h((function(e){return Object(R.a)(Object(R.a)({},e),{},{imgLoading:!1})}))}),[]);return Object(x.jsx)("div",{className:"panelContainer",children:Object(x.jsxs)("div",{className:t?"panel active":"panel inactive",children:[Object(x.jsx)("img",{src:z,alt:"close",id:"closePanel",className:"closeIcon",onClick:C}),m.excessOfRevitions&&Object(x.jsx)("p",{className:"excess",children:"No puedes incrementar o disminuir la probabilidad m\xe1s de una vez"}),m.updatedFrecuence&&Object(x.jsx)("p",{className:"frecuenceUpdated",children:"Dato actualizado!"}),Object(x.jsxs)("div",{className:"infoContainer justify-center",children:[Object(x.jsxs)("div",{className:"column",children:[Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"verticalCentered align-center",children:[Object(x.jsx)("img",{src:te,className:"petsImg"}),Object(x.jsx)("span",{children:"Descripci\xf3n"})]}),Object(x.jsx)("p",{children:r||"No hay descripci\xf3n"})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"verticalCentered align-center",children:[Object(x.jsx)("img",{src:rt}),Object(x.jsx)("span",{children:"Avistamientos"})]}),Object(x.jsxs)("div",{className:"probabilityContainer align-center",children:[Object(x.jsx)("div",{className:"probabilitybars",children:w}),Object(x.jsxs)("label",{htmlFor:"decrementProb",children:[Object(x.jsx)("input",{type:"radio",name:"dep",className:"hide",id:"decrementProb",onChange:S},N),Object(x.jsx)("img",{src:st})]}),Object(x.jsxs)("label",{htmlFor:"incrementProb",className:"centered",children:[Object(x.jsx)("input",{type:"radio",className:"hide",id:"incrementProb",name:"dep",onChange:E},A),Object(x.jsx)("img",{src:$})]})]})]}),Object(x.jsxs)("div",{children:[Object(x.jsxs)("div",{className:"verticalCentered align-center",children:[Object(x.jsx)("img",{src:O}),Object(x.jsx)("span",{children:"Contacto"})]}),Object(x.jsx)("p",{children:i||"No hay contacto"})]})]}),Object(x.jsxs)("div",{className:m.isImgOpen?"fullScreen":"animalImgcontainer",children:[m.isImgOpen&&Object(x.jsx)("div",{className:"background emergentContainer",onClick:function(){h({isImgOpen:!1})}}),Object(x.jsxs)("div",{className:(m.isImgOpen?"deployimg rounded relative align-center justify-center":"relative nodeployed")+(window.innerHeight>window.innerWidth?" top":" center"),children:[m.isImgOpen&&Object(x.jsx)("img",{className:window.innerHeight>window.innerWidth?"left closeIcon":"right closeIcon",id:"closeimg",src:z,onClick:I}),Object(x.jsx)("img",{className:m.isImgOpen&&window.innerHeight>window.innerWidth?"mobilbigimg":"animalImg",onClick:v,src:a||void 0,onLoad:D},o),m.imgLoading&&Object(x.jsx)(k,{})]})]})]})]})})}),lt=function(){var e=Object(B.a)(Object(L.a)().mark((function e(){var t,n,a,c,i,r=arguments;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:0,n=r.length>1&&void 0!==r[1]?r[1]:0,c=r.length>3?r[3]:void 0,i=r.length>4?r[4]:void 0,(a=r.length>2&&void 0!==r[2]&&r[2])?(c((function(e){return Object(R.a)(Object(R.a)({},e),{},{prob:i<=1?1:2*i-1})})),ct(i-.5,Ue)):(c((function(e){return Object(R.a)(Object(R.a)({},e),{},{prob:i<4.5?2*i+2:10})})),ct(i+1,Ue)),e.prev=6,e.next=9,T.a.put(Se,{lat:t,lng:n,isDeprecated:a});case 9:c((function(e){return Object(R.a)(Object(R.a)({},e),{},{loading:!1,updatedFrecuence:!0})})),setTimeout((function(){c((function(e){return Object(R.a)(Object(R.a)({},e),{},{updatedFrecuence:!1})}))}),600),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(6),console.log(e.t0);case 16:case"end":return e.stop()}}),e,null,[[6,13]])})));return function(){return e.apply(this,arguments)}}(),dt=n(20),ut="data:image/png;base64,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",jt=n(21);function bt(){var e=Object(s.useState)(!0),t=Object(d.a)(e,2),n=t[0],a=t[1];return Object(s.useEffect)((function(){setTimeout((function(){a(!1)}),5e3)}),[]),Object(x.jsxs)(yt,{className:"rounded centered pointer",deployed:n,children:[Object(x.jsx)(Nt,{id:"infoIcon",className:"bolder white",children:"i"}),Object(x.jsxs)(At,{id:"info",children:[Object(x.jsxs)("p",{children:["Encuentra y reporta y atuda animales ",Object(x.jsx)("span",{children:Object(x.jsx)(St,{src:ut})})," en la calle"]}),Object(x.jsxs)(Ct,{children:[Object(x.jsxs)("li",{children:["Agrega un registro dando click en ",Object(x.jsx)("span",{className:"blue bolder",children:"+"})]}),Object(x.jsx)("li",{children:"Arrastra la marca que agregaste "}),Object(x.jsxs)("li",{children:["Ajusta el ",Object(x.jsx)("span",{className:"green bolder",children:"\xe1rea"})," de residencia"]}),Object(x.jsxs)("li",{children:["Puedes incluir una ",Object(x.jsx)("span",{className:"blue",children:"foto "}),"y otros datos "]})]})]})]})}var gt,pt,ft,mt,Ot,ht,vt,xt,kt,wt,yt=jt.b.div(He||(He=Object(dt.a)(["\n    font-style: italic;\n    padding: 0 12px;\n    font-family: 'Roboto';\n    min-width: 0.25cm;\n    z-index: 408;\n    position: absolute;\n    left: 0;\n    min-height: 34px;\n    margin-top: 45px;\n    margin-left: 10px;\n    background-color:",";\n    &:hover {\n        background-color: white;\n    }\n    &:hover #infoIcon {\n    display: none;\n    }\n    &:hover #info{\n        display: block;\n    }\n"])),(function(e){return e.deployed?"white":"#3388FF"})),Nt=jt.b.div(Ve||(Ve=Object(dt.a)(["\n    font-size: 19px;\n"]))),At=jt.b.div(Ye||(Ye=Object(dt.a)(["\n    display: none;\n"]))),Ct=jt.b.ul(Je||(Je=Object(dt.a)(["\n    padding-left: 20px;\n"]))),St=jt.b.img(Ge||(Ge=Object(dt.a)(["\n    height: 2em;\n    position: relative;\n    top: 0.8em;"]))),Et=(n(149),n(104)),It=(n(150),n(103)),Dt=n.p+"static/media/modifyIcon.f9f44e62.svg",Ft=n.p+"static/media/infoIcon.78b847fc.svg",Mt=n.p+"static/media/dbIcon.48c658e4.svg",Lt=n.p+"static/media/logoutIcon.bd7f1979.svg",Bt=n.p+"static/media/feedBackIcon.836ec394.svg",Rt=n.p+"static/media/bluetrashicon.953c7e06.svg",Pt=n.p+"static/media/deployIcon.91c92580.svg",Tt=function(e){return Object(x.jsxs)("section",{className:"emergentContainer",children:[Object(x.jsx)("div",{onClick:e.close,className:"background"}),Object(x.jsxs)("div",{className:"emergentWindow hide-scroll",children:[Object(x.jsx)("img",{src:z,className:"closeIcon",onClick:e.close}),Object(x.jsx)("p",{className:"title",children:"Acerca de"}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{children:"Animalcoords"})," es un app dise\xf1ada para que puedas encontrar y reportar animales de la calle."]}),Object(x.jsx)("p",{children:Object(x.jsxs)("ul",{children:[Object(x.jsxs)("li",{children:["Agrega un registro dando click en ",Object(x.jsx)("span",{className:"blue bolder",children:"+"})]}),Object(x.jsx)("li",{children:"Arrastra la marca que agregaste "}),Object(x.jsxs)("li",{children:["Puedes ajustar el ",Object(x.jsx)("span",{className:"green bolder",children:"\xe1rea"})," y subir una ",Object(x.jsx)("span",{className:"blue",children:"foto"})]}),Object(x.jsx)("li",{children:"Puedes a\xf1adir tu informaci\xf3n de contacto"})]})}),Object(x.jsx)("p",{children:"Si deseas adoptar un peludito o te sobra un poco de comida puedes estar seguro de que un animal callejero te agradecer\xe1 tu ayuda"})]})]})},zt=(n(151),function(e){var t=Object(s.useState)({isSlow:!1,isConfuse:!1}),n=Object(d.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(!1),r=Object(d.a)(i,2),o=r[0],l=r[1],u=Object(ie.b)(),j=function(e,t){u(le({feedBack:e,withoutConnection:t}))},b=function(){c({isSlow:!1,isConfuse:!1}),l(!1)};return Object(x.jsxs)("form",{onSubmit:function(e){Wt(e,a.isSlow,a.isConfuse,l,j,b)},className:"emergentContainer feedBackContainer",children:[Object(x.jsx)("div",{onClick:e.close,className:"background"}),Object(x.jsxs)("div",{className:"emergentWindow",id:"feedBack",children:[Object(x.jsx)("img",{src:z,className:"closeIcon",onClick:e.close}),Object(x.jsx)("p",{className:"title",children:"Ayudanos a mejorar!"}),Object(x.jsx)("p",{children:"Envianos tus Sugerencias"}),Object(x.jsxs)("div",{id:"suggestionsBtns",children:[Object(x.jsx)("div",{className:a.isSlow?"activeSuggestion":"",onClick:function(){c((function(e){return{isConfuse:e.isConfuse,isSlow:!e.isSlow}}))},children:"Es lenta la p\xe1gina?"}),Object(x.jsx)("div",{className:a.isConfuse?"activeSuggestion":"",onClick:function(){c((function(e){return{isConfuse:!e.isConfuse,isSlow:e.isSlow}}))},children:"Es la interfaz confusa?"})]}),Object(x.jsx)("div",{children:Object(x.jsx)("textarea",{placeholder:"Sugerencias",className:"rounded"})}),Object(x.jsx)("div",{className:"align-center rounded",id:"sendDiv",children:o?Object(x.jsx)(k,{}):Object(x.jsx)("input",{type:"submit",value:"Enviar"})})]})]})}),Wt=function(){var e=Object(B.a)(Object(L.a)().mark((function e(t,n,a,c,i,r){var s,o,l;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s=t.target[0].value,c(!0),e.prev=3,e.next=6,T.a.post(Se+"feedBack",{isSlow:n,isConfuse:a,moreSuggestions:s});case 6:o=e.sent,l=o.status,console.log(200===l?"Dato registrado":"Error en el envio de la informaci\xf3n"),r(),t.target[0].value="",i(!0,!1),c(!1),setTimeout((function(){i(!1,!1)}),2e3),e.next=21;break;case 16:e.prev=16,e.t0=e.catch(3),i(!1,!0),c(!1),setTimeout((function(){i(!1,!1)}),2e3);case 21:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t,n,a,c,i,r){return e.apply(this,arguments)}}(),Ut=n(95),Ht=n.n(Ut),Vt=function(e){var t=e.mark,n=t.type,a=t.frecuence,c=t.imgurl,i=t.description,r=Object(s.useState)(!1),o=Object(d.a)(r,2),l=o[0],u=o[1],j=Object(s.useState)(!1),b=Object(d.a)(j,2),g=b[0],p=b[1],f=Object(ie.b)(),m=Object(s.useMemo)((function(){for(var e=[],t=0;t<10;t++)e.push(Object(x.jsx)("div",{style:{background:t<a?"#3B72E1":"#E3E3E3"}},Math.random()));return e}),[a]),O=Object(s.useCallback)((function(){u((function(e){return!e}))}),[]);return g?null:Object(x.jsxs)(Yt,{deployed:l,children:[Object(x.jsxs)("div",{onClick:function(){u(!0)},children:[Object(x.jsx)("img",{src:"dog"===n?W:U}),Object(x.jsx)("div",{children:i||"Sin descripci\xf3n"})]}),l&&Object(x.jsxs)(Jt,{children:[Object(x.jsx)("div",{className:"probabilitybars",children:m}),c&&Object(x.jsx)(qt,{src:c})]}),Object(x.jsx)(Zt,{onClick:function(){f(he(Object(R.a)(Object(R.a)({},e.mark),{},{coords:{lat:e.mark.lat,lng:e.mark.lng}}))),p(!0)},children:"Restaurar"}),Object(x.jsx)(Gt,{deployed:l,src:Pt,onClick:O})]})},Yt=jt.b.div(gt||(gt=Object(dt.a)(["\n    align-items: center;\n    display: flex;\n    background-color: hsl(0, 0%, 97%);\n    transition: height var(--transition-time);\n    max-height: 10cm;\n    padding: 7px;\n    border-radius: 5px;\n    margin-bottom: 3px;\n    ","\n}\n    &>div {\n        display: flex;\n        overflow: hidden;\n        max-height: 80%;\n    &>div>img {\n        align-self: center;\n    }\n    &>div:nth-child(1) {\n    flex-grow: 1;\n    }\n    "])),(function(e){return e.deployed?Object(jt.a)(pt||(pt=Object(dt.a)(["\n            height: 40vh;\n            flex-wrap: wrap;\n            justify-content: space-evenly;\n            &>div:nth-child(1){width:100%}\n            "]))):Object(jt.a)(ft||(ft=Object(dt.a)(["\n                justify-content: space-evenly;\n                height: 7vh;\n                white-space: nowrap;"])))})),Jt=jt.b.div(mt||(mt=Object(dt.a)(["\n   align-items: center;\n    width: 95%;\n    display: flex;\n    flex-direction: column;\n"]))),Gt=jt.b.img(Ot||(Ot=Object(dt.a)(["\n    animation-fill-mode: forwards;\n    animation-duration: 400ms;\n    width: 2.8vh;\n    margin-left: 5px;\n    ","\n"])),(function(e){return e.deployed?Object(jt.a)(ht||(ht=Object(dt.a)(["\n    animation-name: turn;\n    "]))):Object(jt.a)(vt||(vt=Object(dt.a)(["   \n    animation-name: return;\n        "])))})),qt=jt.b.img(xt||(xt=Object(dt.a)(["\n    min-height: 20vh ;\n    background-color: rgb(219, 219, 219);\n    width: 100%;\n"]))),Zt=jt.b.button(kt||(kt=Object(dt.a)(["\n    background-color: transparent;\n    border: 3px solid green;\n    color: green;\n    cursor: pointer;\n    border-radius: var(--border-radius);\n    "]))),Qt=n(96),Kt=n.n(Qt),_t=!1,Xt=function(e){var t=Object(s.useState)(!1),n=Object(d.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(!1),r=Object(d.a)(i,2),o=r[0],l=r[1],u=Object(s.useState)(!1),j=Object(d.a)(u,2),b=j[0],g=j[1],p=Object(s.useState)(!1),f=Object(d.a)(p,2),m=f[0],O=f[1],h=Object(s.useState)(),v=Object(d.a)(h,2),k=v[0],w=v[1],y=Object(ie.c)((function(e){return e.editing.value})),N=Object(ie.b)(),A=function(){var t=Object(B.a)(Object(L.a)().mark((function t(){var n,a,c;return Object(L.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.a.get(Se+"backup",{params:{userid:e.userid}});case 3:n=t.sent,a=n.data,(c=a.map((function(e){return Object(x.jsx)(Vt,{mark:e},Math.random())}))).length?w(c):w(Object(x.jsx)("p",{children:"Papelera vacia"})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),w(Object(x.jsx)("p",{children:"Papelera vacia"}));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(){return t.apply(this,arguments)}}();return Ce.subscribe(Object(B.a)(Object(L.a)().mark((function e(){return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Ce.getState().backup.value.pointDeleted&&Ce.getState().backup.value.pointDeleted._id!==_t&&(console.log("getting backup"),w((function(e){return[].concat(Object(Et.a)(e),[Object(x.jsx)(Vt,{mark:Ce.getState().backup.value.pointDeleted},Math.random())])})),_t=Ce.getState().backup.value.pointDeleted._id);case 1:case"end":return e.stop()}}),e)})))),Object(s.useEffect)(Object(B.a)(Object(L.a)().mark((function e(){return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A();case 1:case"end":return e.stop()}}),e)}))),[]),Object(x.jsxs)("div",{id:"sidebarContainer",className:"justify-center align-center",children:[o&&Object(x.jsx)(Tt,{close:function(){l(!1)}}),b&&Object(x.jsx)(zt,{close:function(){g(!1)}}),Object(x.jsx)(It.a,{style:{height:"80%",width:"40%",minWidth:"30px",color:"rgb(44, 44, 44)",cursor:"pointer"},onClick:function(){c(!a)}}),a&&Object(x.jsx)("div",{className:"closeSection fullScreen",onClick:function(){c(!1),O(!1)}}),Object(x.jsxs)("div",{id:"sidebar",className:a?" active":"",children:[Object(x.jsx)("img",{src:z,className:"closeIcon",onClick:function(){c(!1),O(!1)}}),Object(x.jsxs)("div",{className:"items",children:[Object(x.jsxs)("div",{onClick:y?function(){N(pe())}:function(){N(ge()),setTimeout((function(){N(le({editInstructions:!0}))}),500),setTimeout((function(){N(de())}),3e3),setTimeout((function(){c(!1)}),500)},children:[Object(x.jsx)("img",{src:Dt}),Object(x.jsx)("p",{children:"Modo edici\xf3n"})," ",Object(x.jsx)(Kt.a,{onChange:function(){},className:"switch",offColor:"#CFCDC9",onColor:"#73f27e",checked:y})]}),Object(x.jsxs)("div",{className:"paperbin",onClick:function(){O(!m)},children:[Object(x.jsx)("img",{src:Rt}),Object(x.jsx)("p",{children:"Papelera"}),Object(x.jsx)("img",{src:Pt,className:m?"relative turn":"relative return"})]}),Object(x.jsx)("div",{className:m?"backupInfo column":"backupInfo column inactive",style:m?{height:"30vh"}:void 0,children:k}),Object(x.jsxs)("div",{onClick:function(){$t(N)},children:[Object(x.jsx)("img",{src:Mt}),Object(x.jsx)("p",{children:"Base de Datos"})]}),Object(x.jsxs)("div",{onClick:function(){c(!1),l(!0)},children:[Object(x.jsx)("img",{src:Ft}),Object(x.jsx)("p",{children:"Acerca de"})]}),Object(x.jsxs)("div",{onClick:function(){g(!0),c(!1)},children:[Object(x.jsx)("img",{src:Bt}),Object(x.jsx)("p",{children:"Sugerencias"})]}),Object(x.jsxs)("div",{onClick:function(){e.handleLogout(),N(pe())},children:[Object(x.jsx)("img",{src:Lt}),Object(x.jsx)("p",{children:"Salir"})]})]})]})]})},$t=function(){var e=Object(B.a)(Object(L.a)().mark((function e(t){var n,a;return Object(L.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(Se+"database");case 3:return n=e.sent,e.next=6,n.blob();case 6:a=e.sent,Ht()(a,"database.cvs"),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t(le({withoutConnection:!0})),setTimeout((function(){t(le({withoutConnection:!1}))}),2e3);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),en=n.p+"static/media/userIconFilled.6d601c6d.svg",tn=(n(153),function(){var e=Object(ie.c)((function(e){return e.notifications.value}));return Object(x.jsxs)("div",{className:"notifications",children:[e.editInstructions&&Object(x.jsxs)("div",{className:"uploading editMarkers ",children:[" Da click en la marcas ",Object(x.jsx)("span",{className:"orange",children:"verdes"})," para editarlas "]}),e.noEditable&&Object(x.jsx)("div",{className:"error",children:"No puedes editar marcas que no hayas reportado"}),e.feedBack&&Object(x.jsx)("div",{className:"uploading",children:"Gracias por tus sugerencias"}),e.withoutConnection&&Object(x.jsx)("div",{className:"error",children:"Sin conexi\xf3n"}),e.showOutOfRange&&Object(x.jsx)("div",{className:"error",children:"El area debe ser menor a 400mts"}),e.showProgress&&Object(x.jsxs)("div",{className:"uploading",children:[Object(x.jsx)("span",{children:"Guardando..."}),Object(x.jsx)("progress",{value:e.progress})]}),e.showMarkerInThere&&Object(x.jsx)("div",{className:"error",children:" Ya hay una marca en ese lugar"})]})}),nn=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).child=o.a.createRef(),c.openPanel=c.openPanel.bind(Object(N.a)(c)),c}return Object(c.a)(n,[{key:"openPanel",value:function(e,t,n){this.child.current.open(e,t,n)}},{key:"render",value:function(){return Object(x.jsxs)("div",{style:{display:this.props.show?void 0:"none"},children:[Object(x.jsx)("div",{children:Object(x.jsxs)(A.a,{className:"mapp",id:"map",style:{zIndex:0},center:{lat:5.494,lng:-73.4854},zoom:16,zoomControl:!1,children:[Object(x.jsx)(C.a,{attribution:"\xa9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(x.jsx)(S.a,{position:"bottomleft"}),Object(x.jsx)(M,{className:"search"}),Object(x.jsx)(tt,{open:this.openPanel,userid:this.props.useruid}),Object(x.jsx)(bt,{})]})}),Object(x.jsx)(ot,{ref:this.child}),Object(x.jsx)(tn,{}),this.props.useruid?Object(x.jsx)(Xt,{handleLogout:this.props.handleLogout,userid:this.props.useruid}):Object(x.jsx)("div",{className:"loginBtnContainer",onClick:this.props.showLogin,children:Object(x.jsx)("img",{className:"loginBtn",src:en})})]})}}]),n}(s.Component),an=function(){Object(s.useEffect)((function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),[]);var e,t=Object(s.useState)("noUserYet"),n=Object(d.a)(t,2),a=n[0],c=n[1],i=Object(s.useRef)(""),r=Object(s.useRef)(""),o=Object(s.useState)({}),l=Object(d.a)(o,2),u=l[0],b=l[1],f=Object(s.useState)(!0),m=Object(d.a)(f,2),O=m[0],h=m[1],v=Object(s.useState)(!0),k=Object(d.a)(v,2),N=k[0],A=k[1],C=Object(s.useState)(!1),S=Object(d.a)(C,2),E=S[0],I=S[1],D=function(){b({})},F=function(){g.onAuthStateChanged((function(e){e?(i.current="",r.current="",A(!0),c(e)):c("noUser")}))};if(Object(s.useEffect)((function(){F()}),[]),"noUserYet"===a)e=Object(x.jsx)(w,{});else e=Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(y,{email:r,password:i,handleLogin:function(){wt=!0,D(),g.signInWithEmailAndPassword(r.current,i.current).catch((function(e){switch(wt=!1,e.code){case"auth/Invalid-email":b({emailError:"Email inv\xe1lido"});break;case"auth/user-disable":b({emailError:"Usuario Desabilitad0"});break;case"auth/user-not-found":b({emailError:"Usuario no registrado"});break;case"auth/too-many-requests":b({emailError:"Demasiados intentos, regresa en unos minutos o restablece tu contrase\xf1a",resetPassword:!0}),I(!0);break;default:b({emailError:e.message});break;case"auth/wrong-password":b({passwordError:"Contrase\xf1a incorrecta",resetPassword:!0}),I(!0)}}))},handleSingUp:function(){wt=!0,D(),g.createUserWithEmailAndPassword(r.current,i.current).catch((function(e){switch(wt=!1,e.code){case"auth/email-already-in-use":b({emailError:"Usuario registrado"});break;case"auth/invalid-email":b({emailError:"Email inv\xe1lido"});break;case"auth/weak-password":b({passwordError:"Contrase\xf1a d\xe9bil"});break;default:b({passwordError:e.message})}}))},hasAccount:O,setHasAccount:h,errors:u,handleLoginWithGoogle:function(){g.signInWithPopup(p).catch((function(e){alert("err: "+e)}))},show:!N,hide:function(){A(!0)},loading:wt,resetPassword:function(){b({}),j.auth().sendPasswordResetEmail(r.current).then((function(e){return console.log(e)})).catch((function(e){console.log(e)}))},newPassword:E,clearErrors:function(){b({})}}),Object(x.jsx)(nn,{useruid:"noUser"!=a&&a.uid,handleLogout:function(){wt=!1,g.signOut()},show:N,showLogin:function(){A(!1)}})]});return Object(x.jsx)("div",{className:"app",children:e})},cn=n(169),rn=n(102),sn=(n(154),n.p+"static/media/error.0e164b54.svg");function on(){return Object(x.jsxs)("section",{className:"align-center fullScreen padding-in",id:"fall-back",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{children:"Un error inesperado ha ocurrido, recarga el sitio para seguir usandolo."}),Object(x.jsx)("p",{children:"El error ya ha sido reportado y los solucionaremos pronto."})]}),Object(x.jsx)("img",{src:sn,alt:""})]})}n(155).config(),cn.a({dsn:"https://75fdedc350834ff883310e368b49362d@o946206.ingest.sentry.io/5895081",integrations:[new rn.a.BrowserTracing],tracesSampleRate:1});var ln=function(e){Object(i.a)(n,e);var t=Object(r.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={hasError:!1},c}return Object(c.a)(n,[{key:"render",value:function(){return this.state.hasError?Object(x.jsx)(on,{}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),n}(o.a.Component);Object(l.render)(Object(x.jsx)(ie.a,{store:Ce,children:Object(x.jsx)(ln,{children:Object(x.jsx)(an,{})})}),document.getElementById("app"))},77:function(e,t,n){}},[[158,1,2]]]);
//# sourceMappingURL=main.0280bde4.chunk.js.map